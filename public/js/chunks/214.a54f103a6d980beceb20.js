(window.webpackJsonp=window.webpackJsonp||[]).push([[214],{1629:function(a,s,t){"use strict";t.r(s);t(86);var e=t(1896),r=t(344),n=t(1895),o=t(342),i=t(345),d=t(1894),l=t(348),_=t(438),c=t(1897),m=t(93),p=t(539),u=t(1899),b={components:{BCard:e.a,BCardHeader:r.a,BCardText:n.a,BCardBody:o.a,BCardFooter:i.a,BRow:d.a,BCol:l.a,BForm:_.a,BFormInput:c.a,BButton:m.a,BSpinner:p.a,BAlert:u.a},data:function(){return{isBusy:!0,name:"",feedback_name:"",name_State:null,email:"",feedback_email:"",email_State:null,no_hp:"",feedback_no_hp:"",no_hp_State:null,current_password:"",feedback_current_password:"",current_password_State:null,password:"",feedback_password:"",password_State:null,password_confirmation:"",feedback_password_confirmation:"",password_confirmation_State:null,dismissSecs:10,dismissCountDownProfile:0,dismissCountDown:0,alert_variant:"",alert_title:"",alert_text:"",readonly:!1}},created:function(){var a=this;this.$http.get("/referensi/users/profile").then((function(s){a.isBusy=!1;var t=s.data;a.name=t.name,a.email=t.email,a.no_hp=t.no_hp,a.hasRole("sekolah")&&(a.readonly=!0)}))},methods:{countDownChangedProfile:function(a){this.dismissCountDownProfile=a},countDownChanged:function(a){this.dismissCountDown=a},handleSubmit:function(){var a=this;this.name_State=null,this.feedback_name="",this.email_State=null,this.feedback_email="",this.no_hp_State=null,this.feedback_no_hp="",this.$http.post("/referensi/users/update-profile",{name:this.name,no_hp:this.no_hp}).then((function(s){var t=s.data;t.errors?(a.name_State=!t.errors.name&&null,a.feedback_name=t.errors.name?t.errors.name[0]:"",a.email_State=!t.errors.email&&null,a.feedback_email=t.errors.email?t.errors.email[0]:"",a.no_hp_State=!t.errors.no_hp&&null,a.feedback_no_hp=t.errors.no_hp?t.errors.no_hp[0]:""):(a.dismissCountDownProfile=a.dismissSecs,a.alert_variant=t.icon,a.alert_title=t.title,a.alert_text=t.text)}))},handleSubmitPassword:function(){var a=this;this.current_password_State=null,this.feedback_current_password="",this.password_State=null,this.feedback_password="",this.password_confirmation_State=null,this.feedback_password_confirmation="",this.$http.post("/referensi/users/update-profile",{current_password:this.current_password,password:this.password,password_confirmation:this.password_confirmation}).then((function(s){var t=s.data;t.errors?(a.current_password_State=!t.errors.current_password&&null,a.feedback_current_password=t.errors.current_password?t.errors.current_password[0]:"",a.password_State=!t.errors.password&&null,a.feedback_password=t.errors.password?t.errors.password[0]:"",a.password_confirmation_State=!t.errors.password_confirmation&&null,a.feedback_password_confirmation=t.errors.password_confirmation?t.errors.password_confirmation[0]:""):(a.dismissCountDown=a.dismissSecs,a.alert_variant=t.icon,a.alert_title=t.title,a.alert_text=t.text,a.$ability.update(t.ability))}))}}},f=t(0),w=Object(f.a)(b,(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",[t("b-card",{attrs:{"no-body":""}},[t("b-card-header",[t("h4",{staticClass:"card-title"},[a._v("Informasi Profil Pengguna")]),a._v(" "),t("b-card-text",{staticClass:"text-muted"},[a._v("\n        Perbaharui informasi profil dan alamat email akun Anda jika diperlukan.\n      ")])],1),a._v(" "),t("b-form",{ref:"form_profile",on:{submit:function(s){return s.stopPropagation(),s.preventDefault(),a.handleSubmit(s)}}},[a.isBusy?t("b-card-body",[t("div",{staticClass:"text-center text-danger my-2"},[t("b-spinner",{staticClass:"align-middle"}),a._v(" "),t("strong",[a._v("Loading...")])],1)]):t("b-card-body",[t("b-alert",{attrs:{show:a.dismissCountDownProfile,dismissible:"",variant:a.alert_variant},on:{dismissed:function(s){a.dismissCountDownProfile=0},"dismiss-count-down":a.countDownChangedProfile}},[t("div",{staticClass:"alert-body"},[t("span",[t("strong",[a._v(a._s(a.alert_title))]),a._v(" "+a._s(a.alert_text))])])]),a._v(" "),t("b-row",{staticClass:"mb-1"},[t("b-col",{attrs:{sm:"3"}},[t("label",{attrs:{for:"name"}},[a._v("Nama Lengkap")])]),a._v(" "),t("b-col",{attrs:{sm:"9"}},[t("b-form-input",{attrs:{id:"nama",type:"text","invalid-feedback":a.feedback_name,state:a.name_State},model:{value:a.name,callback:function(s){a.name=s},expression:"name"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.feedback_name,expression:"feedback_name"}],staticClass:"text-danger"},[a._v(a._s(a.feedback_name))])],1)],1),a._v(" "),t("b-row",{staticClass:"mb-1"},[t("b-col",{attrs:{sm:"3"}},[t("label",{attrs:{for:"name"}},[a._v("Email")])]),a._v(" "),t("b-col",{attrs:{sm:"9"}},[t("b-form-input",{attrs:{id:"email",type:"email","invalid-feedback":a.feedback_email,state:a.email_State,readonly:a.readonly},model:{value:a.email,callback:function(s){a.email=s},expression:"email"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.feedback_email,expression:"feedback_email"}],staticClass:"text-danger"},[a._v(a._s(a.feedback_email))])],1)],1),a._v(" "),t("b-row",{staticClass:"mb-1"},[t("b-col",{attrs:{sm:"3"}},[t("label",{attrs:{for:"no_hp"}},[a._v("Nomor Whatsapp Aktif")])]),a._v(" "),t("b-col",{attrs:{sm:"9"}},[t("b-form-input",{attrs:{id:"no_hp",type:"text","invalid-feedback":a.feedback_no_hp,state:a.no_hp_State},model:{value:a.no_hp,callback:function(s){a.no_hp=s},expression:"no_hp"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.feedback_no_hp,expression:"feedback_no_hp"}],staticClass:"text-danger"},[a._v(a._s(a.feedback_no_hp))])],1)],1),a._v(" "),t("b-button",{staticClass:"float-right mb-1",attrs:{type:"submit",variant:"primary"}},[a._v("Simpan")])],1)],1)],1),a._v(" "),t("b-card",{attrs:{"no-body":""}},[t("b-card-header",[t("h4",{staticClass:"card-title"},[a._v("Perbaharui Kata Sandi")]),a._v(" "),t("b-card-text",{staticClass:"text-muted"},[a._v("\n        Pastikan akun Anda menggunakan kata sandi acak yang panjang agar tetap aman.\n      ")])],1),a._v(" "),t("b-form",{ref:"form_password",on:{submit:function(s){return s.stopPropagation(),s.preventDefault(),a.handleSubmitPassword(s)}}},[a.isBusy?t("b-card-body",[t("div",{staticClass:"text-center text-danger my-2"},[t("b-spinner",{staticClass:"align-middle"}),a._v(" "),t("strong",[a._v("Loading...")])],1)]):t("b-card-body",[t("b-alert",{attrs:{show:a.dismissCountDown,dismissible:"",variant:a.alert_variant},on:{dismissed:function(s){a.dismissCountDown=0},"dismiss-count-down":a.countDownChanged}},[t("div",{staticClass:"alert-body"},[t("span",[t("strong",[a._v(a._s(a.alert_title))]),a._v(" "+a._s(a.alert_text))])])]),a._v(" "),t("b-row",{staticClass:"mb-1"},[t("b-col",{attrs:{sm:"3"}},[t("label",{attrs:{for:"current_password"}},[a._v("Kata sandi saat ini")])]),a._v(" "),t("b-col",{attrs:{sm:"9"}},[t("b-form-input",{attrs:{id:"current_password",type:"password","invalid-feedback":a.feedback_current_password,state:a.current_password_State},model:{value:a.current_password,callback:function(s){a.current_password=s},expression:"current_password"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.feedback_current_password,expression:"feedback_current_password"}],staticClass:"text-danger"},[a._v(a._s(a.feedback_current_password))])],1)],1),a._v(" "),t("b-row",{staticClass:"mb-1"},[t("b-col",{attrs:{sm:"3"}},[t("label",{attrs:{for:"name"}},[a._v("Kata sandi baru")])]),a._v(" "),t("b-col",{attrs:{sm:"9"}},[t("b-form-input",{attrs:{id:"password",type:"password","invalid-feedback":a.feedback_password,state:a.password_State},model:{value:a.password,callback:function(s){a.password=s},expression:"password"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.feedback_password,expression:"feedback_password"}],staticClass:"text-danger"},[a._v(a._s(a.feedback_password))])],1)],1),a._v(" "),t("b-row",{staticClass:"mb-1"},[t("b-col",{attrs:{sm:"3"}},[t("label",{attrs:{for:"no_hp"}},[a._v("Konfirmasi kata sandi")])]),a._v(" "),t("b-col",{attrs:{sm:"9"}},[t("b-form-input",{attrs:{id:"password_confirmation",type:"password","invalid-feedback":a.feedback_password_confirmation,state:a.password_confirmation_State},model:{value:a.password_confirmation,callback:function(s){a.password_confirmation=s},expression:"password_confirmation"}}),a._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:a.feedback_password_confirmation,expression:"feedback_password_confirmation"}],staticClass:"text-danger"},[a._v(a._s(a.feedback_password_confirmation))])],1)],1),a._v(" "),t("b-button",{staticClass:"float-right mb-1",attrs:{type:"submit",variant:"primary"}},[a._v("Simpan")])],1)],1)],1)],1)}),[],!1,null,null,null);s.default=w.exports}}]);